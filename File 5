let wallet = 0;
let totalEarned = 0;
let completed = [];
const adminPassword = "Admin302";

const tasks = [
  { id: 1, title: "Visit a website", reward: 5, link: "https://example.com" },
  { id: 2, title: "Watch a video", reward: 10, link: "https://youtube.com" },
  { id: 3, title: "Install an app", reward: 15, link: "#" }
];

function showSection(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function loadTasks() {
  const list = document.getElementById("taskList");
  list.innerHTML = "";
  tasks.forEach(task => {
    if (!completed.includes(task.id)) {
      const div = document.createElement("div");
      div.classList.add("task-card");
      div.innerHTML = `
        <h3>${task.title}</h3>
        <p>Reward: â‚¹${task.reward}</p>
        <button onclick="completeTask(${task.id}, ${task.reward})">Complete Task</button>
      `;
      list.appendChild(div);
    }
  });
}

function completeTask(id, reward) {
  completed.push(id);
  wallet += reward;
  totalEarned += reward;
  document.getElementById("walletBalance").innerText = wallet;
  document.getElementById("completedCount").innerText = completed.length;
  document.getElementById("totalEarned").innerText = totalEarned;
  loadTasks();
}

function withdraw() {
  alert("Withdrawal request sent! (demo only)");
}

function adminLogin() {
  const pass = document.getElementById("adminPass").value;
  if (pass === adminPassword) {
    document.getElementById("adminPanel").classList.remove("hidden");
  } else {
    alert("Incorrect password!");
  }
}

function addTask() {
  const title = document.getElementById("taskTitle").value;
  const reward = parseInt(document.getElementById("taskReward").value);
  const link = document.getElementById("taskLink").value;
  if (title && reward && link) {
    tasks.push({ id: tasks.length + 1, title, reward, link });
    alert("Task added!");
  }
}

window.onload = loadTasks;
